<!DOCTYPE html>
<html manifest="rwb.appcache">
<head>
<meta charset="UTF-8">
<title>Redirect When Blocked</title>
<style>
li {
margin-bottom: 5px;
}
</style>
</head>
<body>
<p>This website could not be accessed. Alternative URLs:</p>
<ul>
<li><a href='https://d3059gkikm7ixv.cloudfront.net/basic/demo/'>https://d3059gkikm7ixv.cloudfront.net/basic/demo/</a></li><li><a href='https://d3u4seijlqumgj.cloudfront.net/basic/demo/'>https://d3u4seijlqumgj.cloudfront.net/basic/demo/</a></li><li><a href='https://d20fpcnyklk6h4.cloudfront.net/basic/demo/'>https://d20fpcnyklk6h4.cloudfront.net/basic/demo/</a></li>
<li><a href='/'>This URL</a></li>
</ul>
<p>
Or contact us by sending an email to <a href="mailto: rwb@greatfire.org">rwb@greatfire.org</a>.
</p>
<script src="jquery-1.11.1.min.js"></script>
<script>
var redirected = false;
$('li a').each(function() {
var $a = $(this);
var a = $a[0];

if ($a.attr('href') == '/') {
$a.attr('href', window.location.href.replace(/[^/]+$/, ''));
}

var img_url = $a.attr('href') + 'favicon.ico';

$img = $('<img>').attr('src', img_url).load(function() {
$a.css('color', 'green');
if (!redirected) {
redirected = true;
setTimeout(function() {
$a.after(' - redirecting...');
window.location = a.href;
}, 1000);
}
}).error(function() {
$a.css('color', 'red');
});
});
</script>
</body>
